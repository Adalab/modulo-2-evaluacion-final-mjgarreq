const y=document.querySelector(".js-userInput"),I=document.querySelector(".js-btnSearch"),o=document.querySelector(".js-animeList"),b=document.querySelector(".js-favAnimeList"),E=document.querySelector(".js-sectionAnimes"),r=document.querySelector(".js-resetFavBtn"),_=document.querySelector(".js-resetBtn"),h=document.querySelector(".js-titleFavAnimes"),F=document.querySelector(".js-titleAnimes");let L=[],s=[];function q(e){e.preventDefault();const t=parseInt(e.currentTarget.id),c=s.findIndex(i=>i.mal_id===t);s.splice(c,1),s.length<=0&&(r.classList.add("hidden"),h.classList.add("hidden"),o.classList.remove("searchAnimeList")),A(),S()}function C(){const e=document.querySelectorAll(".js-close-btn");for(const t of e)t.addEventListener("click",q)}function A(){b.innerHTML="";for(const e of s){let t=e.images.jpg.image_url;t==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"&&(t="https://placehold.co/210x295/90EE90/FFF/?text=ANIME");let c=e.titles,i="";const a=c.find(u=>u.type==="Spanish");a?i=a.title:i=c.find(g=>g.type==="Default").title,E.classList.add("animeSection"),o.classList.add("searchAnimeList");const n=document.createElement("li");b.appendChild(n),n.setAttribute("id",e.mal_id),n.setAttribute("class","js-favAnimes");const f=document.createElement("article");f.setAttribute("class","sectionFavAnimes_article");const l=document.createElement("img");l.src=t,l.setAttribute("class","imgFavAnime");const m=document.createElement("h3"),p=document.createTextNode(i);m.setAttribute("class","sectionFavAnimes_article-title"),m.appendChild(p);const d=document.createElement("button");d.setAttribute("class","js-close-btn"),d.setAttribute("id",e.mal_id);const v=document.createElement("i");v.setAttribute("class","fa-solid fa-xmark"),d.appendChild(v),f.append(l,m),n.append(f,d)}C()}function k(e){const t=parseInt(e.currentTarget.id),c=L.find(n=>n.mal_id===t),i=s.findIndex(n=>n.mal_id===t);let a=e.currentTarget;i===-1?(s.push(c),a.setAttribute("class","js-animes selected"),r.classList.remove("hidden"),h.classList.remove("hidden")):(s.splice(i,1),a.setAttribute("class","js-animes"),h.classList.add("hidden"),o.classList.remove("searchAnimeList"),s.length<=0&&r.classList.add("hidden")),localStorage.setItem("favAnimes",JSON.stringify(s)),A()}function x(){const e=document.querySelectorAll(".js-animes");for(const t of e)t.addEventListener("click",k)}function S(){o.innerHTML="";for(const e of L){let t=e.images.jpg.image_url;t==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"&&(t="https://placehold.co/210x295/90EE90/FFF/?text=ANIME");let c=e.titles,i="";const a=c.find(u=>u.type==="Spanish");a?i=a.title:i=c.find(g=>g.type==="Default").title;const n=s.find(u=>u.mal_id===e.mal_id);let f="";n&&(f="selected");const l=document.createElement("li");o.appendChild(l),l.setAttribute("id",e.mal_id),l.setAttribute("class",`js-animes ${f}`);const m=document.createElement("article");m.setAttribute("class","sectionSearchAnimes_article"),l.appendChild(m);const p=document.createElement("img");p.src=t,p.setAttribute("class","imgSrchAnime");const d=document.createElement("h3"),v=document.createTextNode(i);d.setAttribute("class","sectionSearchAnimes_article-title"),d.appendChild(v),m.append(p,d)}x()}function D(e){fetch(`https://api.jikan.moe/v4/anime?q=${e}`).then(t=>t.json()).then(t=>{L=t.data,S()})}function B(e){e.preventDefault();const t=y.value;F.classList.remove("hidden"),D(t)}I.addEventListener("click",B);function N(e){e.preventDefault(),s=[],E.classList.remove("animeSection"),A(),S(),r.classList.add("hidden"),h.classList.add("hidden"),o.classList.remove("searchAnimeList"),localStorage.setItem("favAnimes",JSON.stringify(s))}r.addEventListener("click",N);function T(e){e.preventDefault(),s=[],L=[],S(),A(),y.value="",r.classList.add("hidden"),E.classList.remove("animeSection"),F.classList.add("hidden"),h.classList.add("hidden"),o.classList.remove("searchAnimeList"),localStorage.setItem("favAnimes",JSON.stringify(s))}_.addEventListener("click",T);const j=localStorage.getItem("favAnimes");j&&(s=JSON.parse(j),r.classList.remove("hidden"),h.classList.remove("hidden"),s.length<=0&&(r.classList.add("hidden"),h.classList.add("hidden")),A(),o.classList.remove("searchAnimeList"));
//# sourceMappingURL=main.js.map
